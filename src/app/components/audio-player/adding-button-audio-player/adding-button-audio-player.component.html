<div class="relative" #popupButton>
  <button (click)="togglePopup($event)" class="bg-gray-800 text-white p-2 rounded-full">
    <fa-icon [icon]="faHeart"></fa-icon>
  </button>
  @if (isPopupVisible) {
  <div class="fixed bg-gray-800 text-white rounded-lg shadow-lg mt-2 w-64 z-50 popup-menu"
    [style.top.px]="popupPosition.top" [style.left.px]="popupPosition.left" style="transform: translate(-100%, -100%);">
    <div class="p-4 max-h-48 overflow-y-auto">
      @for (playlist of playlists; track playlist.id) {
      <div class="flex items-center justify-between p-2" (click)="selectPlaylist(playlist.id)">
        <div class="flex items-center">
          <img [src]="'server/playlist_avatar/' + playlist.avatar" alt="{{ playlist.name }}" class="w-6 h-6 mr-2" />
          <span>{{ playlist.name }}</span>
        </div>
        @if (selectedPlaylists.includes(playlist.id)) {
        <fa-icon [icon]="faCheck" class="text-green-500"></fa-icon>
        }
      </div>
      }
    </div>
    <div class="flex items-center justify-center mb-2">
      <button (click)="togglePopup($event)" class="text-gray-500 hover:text-gray-300">Отмена</button>
      <button (click)="saveTrackToPlaylists()" class="text-gray-500 ml-2 hover:text-gray-300">Готово</button>
    </div>
  </div>
  }
</div>