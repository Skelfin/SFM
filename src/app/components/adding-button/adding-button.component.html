<div class="relative" (click)="$event.stopPropagation()">
    <button (click)="togglePopup($event)" class="bg-gray-800 text-white p-2 rounded-full">
        <fa-icon [icon]="faHeart"></fa-icon>
    </button>
    @if (isPopupVisible) {
    <div class="popup-menu bg-gray-800 text-white rounded-lg shadow-lg absolute w-64">
        <div class="p-4 max-h-48 overflow-y-auto">
            @for (playlist of playlists; track playlist.id) {
            <div class="flex items-center justify-between p-2" (click)="selectPlaylist(playlist.id)">
                <div class="flex items-center">
                    <img [src]="'server/playlist_avatar/' + playlist.avatar" alt="{{ playlist.name }}"
                        class="w-6 h-6 mr-2" />
                    <span>{{ playlist.name }}</span>
                </div>
                @if (selectedPlaylists.includes(playlist.id)) {
                <fa-icon [icon]="faCheck" class="text-green-500"></fa-icon>
                }
            </div>
            }
        </div>
        <button (click)="togglePopup($event)" class="mb-2 text-gray-500 hover:text-gray-300">Отмена</button>
        <button (click)="saveTrackToPlaylists()" class="text-gray-500 ml-2 hover:text-gray-300">Готово</button>
    </div>
    }
</div>